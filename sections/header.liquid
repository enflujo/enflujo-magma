<header id='encabezado'>
  {% assign instagram = section.settings.instagram %}

  {% if instagram != blank %}
    {% assign entrada_instagram = instagram | strip %}

    {%- comment -%}
      Si el usuario pega una URL completa (contiene 'instagram.com' o '://'), la usamos tal cual
      (a√±adiendo https:// si el esquema falta). Si es solo un nombre de usuario, eliminamos
      una posible @ inicial y construimos la URL: https://instagram.com/<usuario>
    {%- endcomment -%}

    {% if entrada_instagram contains 'instagram.com' or entrada_instagram contains '://' %}
      {% assign url_instagram = entrada_instagram %}
      {%- unless url_instagram contains '://' -%}
        {% assign url_instagram = 'https://' | append: url_instagram %}
      {%- endunless -%}
    {% else %}
      {% assign usuario_instagram = entrada_instagram %}
      {% assign primer_caracter = usuario_instagram | slice: 0, 1 %}
      {%- if primer_caracter == '@' -%}
        {% assign usuario_instagram = usuario_instagram | remove: '@' %}
      {%- endif -%}
      {% assign url_instagram = 'https://instagram.com/' | append: usuario_instagram %}
    {% endif %}

    <div class='encabezadoSocial'>
      <a href='{{ url_instagram }}' target='_blank' rel='noopener noreferrer'>
        <img src='{{ 'icono-instagram.svg' | asset_url }}' alt='Instagram' width='20px' height='20px'>
      </a>
    </div>
  {% endif %}

  <h2 class='encabezadoTitulo'>
    {{ shop.name | link_to: routes.root_url }}
  </h2>

  <div class='encabezadoMenu'>
    {% for link in linklists['main-menu'].links %}
      <a href='{{ link.url }}'>{{ link.title }}</a>
    {% endfor %}
  </div>

  <div class='encabezadoIconos'>
    {% if shop.customer_accounts_enabled %}
      {{ 'icon-account.svg' | inline_asset_content | link_to: routes.account_url }}
    {% endif %}

    <a href='{{ routes.cart_url }}'>
      {% if cart.item_count > 0 %}
        <sup>{{ cart.item_count }}</sup>
      {% endif %}

      {{ 'icon-cart.svg' | inline_asset_content }}
    </a>
  </div>
</header>

{% schema %}
{
  "name": "t:general.header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "t:labels.menu"
    },
    {
      "type": "text",
      "id": "instagram",
      "label": "Instagram (usuario o URL)",
      "info": "Introduce tu nombre de usuario o pega la URL completa."
    }
  ]
}
{% endschema %}

{% stylesheet %}
  header {
    height: 5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: fixed;
    z-index: 999;
    width: 100vw;
    left: 0;
    padding: 0 100px;
  }

  header a {
    position: relative;
    text-decoration: none;
    color: var(--color-foreground);
  }

  header a sup {
    position: absolute;
    left: 100%;
    overflow: hidden;
    max-width: var(--page-margin);
  }

  header svg {
    width: 2rem;
  }

  header .encabezadoMenu,
  header .encabezadoIconos {
    display: flex;
    gap: 1rem;
  }
{% endstylesheet %}
